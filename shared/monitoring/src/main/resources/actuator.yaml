management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      probes:
        enabled: true
      show-details: when_authorized
  prometheus:
    metrics:
      export:
        enabled: true
  tracing:
    sampling:
      probability: ${TRACING_SAMPLING_PROBABILITY:0.1}
    enabled: ${TRACING_ENABLED:false}
  zipkin:
    tracing:
      endpoint: ${ZIPKIN_ENDPOINT:http://localhost:9411/api/v2/spans}

---
# =============================================================================
# Prod Profile
# =============================================================================
# 프로덕션에서는 필수 엔드포인트만 노출합니다.
# =============================================================================
spring.config.activate.on-profile: prod

management:
  endpoints:
    web:
      exposure:
        include: health,prometheus

---
# =============================================================================
# Test Profile
# =============================================================================
# 테스트에서는 트레이싱을 비활성화합니다.
# =============================================================================
spring.config.activate.on-profile: test

management:
  tracing:
    enabled: false
